import{_ as j,r as f,h as M,L as J,k as D,G as A,M as Z,A as G,o as s,c,a,t as _,b as l,H as W,m as Y,j as K,z as q,s as Q,N as B,d as z,u,n as L,w as p,F as O,g as F,T as H,l as k,e as R,E as X,v as ee,x as te,I as se}from"./index.88e82aa5.js";import{P as ae,a as oe,C as ne,M as ie,_ as le,S as N,D as re,b as de}from"./SubNavButton.32960114.js";import{C as ue,V as ce}from"./VerticalCard.6787f0d7.js";import"./Title.e6b178dd.js";const pe={key:0,class:"episode-info user-select-none"},ve={class:"title-holder"},_e={class:"title"},me={key:0,class:"airdate"},ye={key:0,class:"thumb-overview"},ge={class:"overview"},he={class:"thumbnail"},fe=["src","alt"],be={key:1},ke={__name:"EpisodeInfo",props:{id:String,season:Number,episode:Number},setup(S){const t=S,d=f({}),e=f(!1);M(()=>{o(t.id,t.season,t.episode)}),J(t,v=>{o(v.id,v.season,v.episode)});const o=async(v,b,P)=>{try{const y=await D({endpoint:`/episode-info/${v}/${b}/${P}`}),E=A.getTranslations(y.translations.translations);d.value={seasonNumber:y.season_number,episodeNumber:y.episode_number,name:E.length>0&&E[0].data.name!==""?E[0].data.name:y.name,airDate:y.air_date!==""?new Date(y.air_date).toLocaleDateString("sk-SK",{weekday:"short",year:"2-digit",month:"short",day:"numeric"}):null,overview:E.length>0?E[0].data.overview:y.overview||"Popis nie je dostupn\xFD",thumbnail:y.still_path!==""?y.still_path:null}}catch(y){console.log(y)}};return(v,b)=>{const P=Z("auto-animate");return d.value.name?G((s(),c("section",pe,[a("div",ve,[a("div",_e,[a("b",null,_(`${d.value.seasonNumber}.${d.value.episodeNumber}`),1),a("span",null,_(d.value.name),1)]),d.value.airDate?(s(),c("span",me,_(d.value.airDate),1)):l("",!0)]),e.value?(s(),c("div",ye,[a("div",ge,[a("span",null,_(d.value.overview),1)]),a("div",he,[d.value.thumbnail?(s(),c("img",{key:0,src:`https://www.themoviedb.org/t/p/w454_and_h254_bestv2${d.value.thumbnail}`,alt:d.value.name},null,8,fe)):(s(),c("div",be))])])):l("",!0),a("button",{onClick:b[0]||(b[0]=y=>e.value=!e.value),class:"button-spoiler"},[a("span",null,_(`${e.value?"Skry":"Zobraz"}`)+" preh\u013Ead",1),a("span",{style:W(`transform: rotate(${e.value?"90":"270"}deg)`)},"\u276E",4)])])),[[P]]):l("",!0)}}},$e=j(ke,[["__scopeId","data-v-ae5f5d2d"]]);const we={class:"episode-info"},Ee={class:"label"},Se={class:"info"},Pe={style:{display:"flex",gap:"8px","font-size":"0.8rem","align-items":"center"}},Ce={style:{color:"var(--theme-color)"}},xe={style:{color:"var(--secondary-text-color)"}},Ie={__name:"EpisodeCard",props:{playable:Boolean,info:{season:Number,episode:Number,date:String}},emits:["playEpisode"],setup(S,{emit:t}){return(d,e)=>(s(),c("section",{onClick:e[0]||(e[0]=o=>t("playEpisode",{season:S.info.season-1,episode:S.info.episode-1})),class:"episode-card user-select-none",style:W(`cursor:${S.playable===!0?"pointer":"default"}`)},[a("div",we,[a("span",Ee,[Y(d.$slots,"label",{},void 0,!0)]),a("div",Se,[a("div",Pe,[a("b",Ce,_(`S${S.info.season}.E${S.info.episode}`),1),a("span",xe,_(new Date(S.info.date).toLocaleDateString("sk-SK",{weekday:"short",year:"2-digit",month:"short",day:"numeric"})),1)])])])],4))}},U=j(Ie,[["__scopeId","data-v-6e95eef8"]]);const Te={class:"outter-holder"},Re={class:"player-holder-wrap"},Ne={key:0,class:"season-episode"},ze=["disabled"],De={class:"season-select-holder user-select-none"},We={class:"poster-holder"},Oe=["src","alt"],Ve=["onClick","data-active"],Fe={class:"poster-holder"},Ae=["src","alt"],je={class:"content-holder"},Me={class:"episode-count"},Be={class:"episode-select-holder user-select-none"},Le=["onClick","data-active"],He=["disabled"],Ue={key:2,class:"episode-card-holder"},Ke={__name:"TVPlayerPanel",props:{id:String,seasons:Object,title:String,nextEpisode:Object,lastEpisode:Object,hasFirstEpisodeAired:Boolean,isPlayerWorking:Boolean},setup(S){const t=S,d=K("store"),e=q({season:0,episode:0}),o=f(null),v=f(!0),b=f(t.seasons.filter(g=>g.episode_count!==0)),P=f(null),y=f(null),E=f(!1),C=f(!1),r=({season:g,episode:$})=>{e.season=g,e.episode=$,x()},x=()=>{o.value=`https://www.2embed.to/embed/tmdb/tv?id=${t.id}&s=${e.season+1}&e=${e.episode+1}`,d.state.favourites.some(g=>g.id===t.id.toString())&&d.methods.favourites.update(d.state.favourites.findIndex(g=>g.id===t.id.toString()),e.season+1,e.episode+1)},I=g=>{g==="backwards"?e.episode!==0?e.episode--:(e.season--,e.episode=T.value-1):e.episode+1!==T.value?e.episode++:(e.season++,e.episode=0)};M(()=>{b.value.length===0?v.value=!1:d.state.favourites.findIndex(g=>g.id===t.id.toString())!==-1&&(e.season=parseInt(d.state.favourites[d.state.favourites.findIndex(g=>g.id===t.id.toString())].season)-1||0,e.episode=parseInt(d.state.favourites[d.state.favourites.findIndex(g=>g.id===t.id.toString())].episode)-1||0)});const T=Q(()=>e.season!==null?b.value[e.season].episode_count:null);return B(P,()=>E.value=!1),B(y,()=>C.value=!1),(g,$)=>{var V,w;return s(),c("section",Te,[a("section",Re,[z(ae,{isPlayerWorking:t.isPlayerWorking,title:t.title,isReady:{status:v.value&&t.hasFirstEpisodeAired,message:v.value&&t.hasFirstEpisodeAired?null:v.value&&!t.hasFirstEpisodeAired?"Seri\xE1l zatia\u013E nevy\u0161iel":!v.value&&t.hasFirstEpisodeAired?"Seri\xE1l nem\xE1 \u017Eiadne epiz\xF3dy":"Nastala chyba"},source:o.value,type:"tv",onSetPlayer:$[0]||($[0]=i=>x())},null,8,["isPlayerWorking","title","isReady","source"])]),v.value&&(((V=u(d).state.globalSettings)==null?void 0:V.allowWatchWhileUnregistered)||u(d).state.credentials.loggedIn)?(s(),c("div",Ne,[a("button",{class:L([{disabled:e.season===0&&e.episode===0},"next-previous-episode"]),disabled:e.season===0&&e.episode===0,onClick:$[1]||($[1]=i=>I("backwards")),title:"Predch\xE1dzaj\xFAca epiz\xF3da"},"\xAB",10,ze),a("div",De,[a("div",{class:"selected-season",onClick:$[2]||($[2]=i=>E.value=!E.value)},[a("div",We,[b.value[e.season].poster_path?(s(),c("img",{key:0,src:`https://image.tmdb.org/t/p/w45_and_h45_face${b.value[e.season].poster_path}`,alt:`Obr\xE1zok ${b.value[e.season].season_number}. s\xE9rie`},null,8,Oe)):l("",!0)]),a("span",null,"S\xE9ria "+_(b.value[e.season].season_number),1)]),z(H,{name:"fade"},{default:p(()=>[E.value?(s(),c("div",{key:0,class:"options",ref_key:"seasonList",ref:P},[(s(!0),c(O,null,F(b.value,(i,m)=>(s(),c("div",{onClick:n=>{e.season=m,E.value=!1,e.episode=0},key:i.season_number,class:"option","data-active":e.season===m},[a("div",Fe,[i.poster_path?(s(),c("img",{key:0,src:`https://image.tmdb.org/t/p/w45_and_h45_face${i.poster_path}`,alt:`Obr\xE1zok ${i.season_number}. s\xE9rie`},null,8,Ae)):l("",!0)]),a("div",je,[a("span",null,"S\xE9ria "+_(i.season_number),1),a("span",Me,_(i.episode_count)+" "+_(i.episode_count==1?"epiz\xF3da":i.episode_count>1&&i.episode_count<5?"epiz\xF3dy":"epiz\xF3d"),1)])],8,Ve))),128))],512)):l("",!0)]),_:1})]),a("div",Be,[a("div",{class:"selected-episode",onClick:$[3]||($[3]=i=>C.value=!C.value)},[a("span",null,"Epiz\xF3da "+_(e.episode+1),1)]),z(H,{name:"fade"},{default:p(()=>[C.value?(s(),c("div",{key:0,class:"options",ref_key:"episodeList",ref:y},[(s(!0),c(O,null,F(u(T),i=>(s(),c("div",{key:i,onClick:m=>{e.episode=i-1,C.value=!1},class:"option","data-active":e.episode===i-1},[a("span",null,"Epiz\xF3da "+_(i),1)],8,Le))),128))],512)):l("",!0)]),_:1})]),a("button",{onClick:x,class:"play-button",title:"Prehra\u0165"},"\u25B6"),a("button",{class:L([{disabled:e.season+1===b.value.length&&e.episode+1===u(T)},"next-previous-episode"]),disabled:e.season+1===b.value.length&&e.episode+1===u(T),onClick:$[4]||($[4]=i=>I("forwards")),title:"\u010Eal\u0161ia epiz\xF3da"},"\xBB",10,He)])):l("",!0),((w=u(d).state.globalSettings)==null?void 0:w.allowWatchWhileUnregistered)||u(d).state.credentials.loggedIn?(s(),k($e,{key:1,id:t.id,season:e.season+1,episode:e.episode+1},null,8,["id","season","episode"])):l("",!0),(t.lastEpisode!==null||t.nextEpisode!==null)&&(u(d).state.globalSettings.allowWatchWhileUnregistered||u(d).state.credentials.loggedIn)?(s(),c("section",Ue,[t.lastEpisode?(s(),k(U,{key:0,playable:!0,info:{season:t.lastEpisode.season_number,episode:t.lastEpisode.episode_number,date:t.lastEpisode.air_date,poster:t.lastEpisode.still_path},onPlayEpisode:r},{label:p(()=>[R("Posledn\xE1 epiz\xF3da")]),_:1},8,["info"])):l("",!0),t.nextEpisode?(s(),k(U,{key:1,playable:!1,info:{season:t.nextEpisode.season_number,episode:t.nextEpisode.episode_number,date:t.nextEpisode.air_date}},{label:p(()=>[R("Nasleduj\xFAca epiz\xF3da")]),_:1},8,["info"])):l("",!0)])):l("",!0)])}}},Je=j(Ke,[["__scopeId","data-v-8ff91305"]]),Ze={class:"flex-column"},Ge=["src","alt"],Ye=a("span",{class:"material-symbols-outlined"},"thumb_up",-1),qe=a("span",{class:"material-symbols-outlined"},"link",-1),Qe={class:"material-symbols-outlined"},Xe={key:0,class:"title"},et={key:0,class:"under-title"},tt={class:"rated"},st={key:0,class:"bullet-after"},at={key:1,class:"bullet-after"},ot={key:0,class:"tagline"},nt={key:0,class:"label"},it={key:1,class:"overview"},lt={key:0,class:"flex-column"},rt=["src","alt"],vt={__name:"TV",setup(S){const t=ee(),d=te(),e=K("store"),o=f({}),v=f(!0),b=f([]),P=f([]),y=f([]),E=f([]),C=f([]),r=f(null),x=f(!1),I=f(!0),T=async w=>{try{o.value=await D({endpoint:`/title/find/tv/${w}`});const i=await D({endpoint:`/video/tv/${w}`}),m=o.value.omdb;b.value=o.value.credits.cast.filter(h=>h.profile_path!==null).splice(0,16),y.value=o.value.recommendations.results.filter(h=>h.poster_path!==null).splice(0,16),P.value=o.value.seasons.filter(h=>h.season_number!==0),E.value=o.value.networks.filter(h=>h.logo_path!==""),C.value=i.results.filter(h=>h.type==="Trailer");const n=A.getTranslations(o.value.translations.translations);r.value={title:n.length>0&&n[0].data.title!==""&&n[0].data.name!==""?n[0].data.title||n[0].data.name:o.value.name,original_title:o.value.original_name,poster:o.value.poster_path,genres:o.value.genres||[],runtime:o.value.episode_run_time[0]?Math.floor(o.value.episode_run_time[0]/60)+"h "+o.value.episode_run_time[0]%60+"m":null,overview:n.length>0?n[0].data.overview:o.value.overview,countries:o.value.origin_country,tagline:n.length>0?n[0].data.tagline:o.value.tagline,imdb:o.value.external_ids.imdb_id,networks:o.value.networks.filter(h=>h.logo_path!==""),creators:A.sortCreators(o.value.created_by.slice(0,5)),ratings:[{name:"TMDB",rating:(Math.floor(parseFloat(o.value.vote_average)*10)/10).toString(),url:`https://www.themoviedb.org/tv/${t.params.id}`},{name:"IMDB",rating:m.imdbRating,url:`https://www.imdb.com/title/${o.value.external_ids.imdb_id}`},{name:"Rotten Tomatoes",rating:m.Ratings!==void 0&&m.Ratings.find(h=>h.Source==="Rotten Tomatoes")!==void 0?m.Ratings.find(h=>h.Source==="Rotten Tomatoes").Value:null,url:null},{name:"Metascore",rating:m.Ratings!==void 0&&m.Ratings.find(h=>h.Source==="Metacritic")!==void 0?parseInt(m.Ratings.find(h=>h.Source==="Metacritic").Value):null,url:null}],year:m.Year,rated:!m.Rated||m.Rated==="N/A"?"Not Rated":m.Rated,number_of_episodes:o.value.number_of_episodes,status:g.get(o.value.status),languages:o.value.spoken_languages},v.value=!1,I.value=o.value.isPlayerWorking,x.value=o.value.isRecommended,document.title=`${r.value.title}${r.value.year?" ("+r.value.year+")":""} / Filmot\xE9ka`}catch{d.push({name:"NotFound"})}},g=new Map;g.set("Returning Series","Pokra\u010Duje").set("Planned","Napl\xE1novany").set("In Production","V produkci\xED").set("Ended","Skon\u010Dil").set("Canceled","Zru\u0161en\xFD").set("Pilot","Pilot");const $=async()=>{try{const w=await D({endpoint:"/title/non-working/",options:{method:"POST",headers:{"Content-Type":"application/json","access-token":e.state.credentials.accessToken},body:JSON.stringify({type:t.name,id:t.params.id,img:r.value.poster,savedTitle:r.value.title})}});I.value=w.isPlayerWorking}catch(w){console.log(w)}},V=async w=>{const{title:i,...m}=w;try{(await D({endpoint:"/title/recommend",options:{method:"POST",headers:{"Content-Type":"application/json","access-token":e.state.credentials.accessToken},body:JSON.stringify({savedTitle:i,...m})}})).success&&(x.value=!0,se({type:"success",text:"\xDAspe\u0161ne pridan\xE9 do odpor\xFA\u010Dan\xFDch"}))}catch(n){console.log(n)}};return M(()=>{T(t.params.id)}),X(()=>{r.value!==null&&(document.title=`${r.value.title}${r.value.year?" ("+r.value.year+")":""} / Filmot\xE9ka`)}),(w,i)=>{var m;return s(),c("main",Ze,[z(oe,{type:"tv",bg:(m=o.value)==null?void 0:m.backdrop_path},{poster:p(()=>{var n;return[(n=r.value)!=null&&n.poster?(s(),c("img",{key:0,class:"poster",src:`https://www.themoviedb.org/t/p/w300${r.value.poster}`,alt:r.value.title},null,8,Ge)):l("",!0)]}),subnav:p(()=>[z(le,{ref:"subnav"},{default:p(()=>[v.value?l("",!0):(s(),c(O,{key:0},[u(e).state.credentials.loggedIn?(s(),k(N,{key:0,title:"Funguj\xFAci prehr\xE1va\u010D",onHandleClick:$},{icon:p(()=>[a("span",{style:W([I.value===!1?"opacity:1":"opacity:0.6"])},"\u26A0",4)]),_:1})):l("",!0),u(e).state.credentials.loggedIn?(s(),k(N,{key:1,title:"Odpor\xFA\u010Di\u0165",disabled:x.value,onHandleClick:i[0]||(i[0]=n=>V({id:u(t).params.id,img:r.value.poster,type:u(t).name,title:r.value.title}))},{icon:p(()=>[Ye]),_:1},8,["disabled"])):l("",!0),z(N,{title:"Skop\xEDrova\u0165 URL adresu",onHandleClick:i[1]||(i[1]=n=>w.$refs.subnav.copyUrl())},{icon:p(()=>[qe]),_:1}),u(e).state.credentials.loggedIn?(s(),k(N,{key:2,title:"Prezren\xE9",onHandleClick:i[2]||(i[2]=n=>u(e).methods.watched.toggle({id:u(t).params.id,type:u(t).name,title:r.value.title}))},{icon:p(()=>[a("span",{style:W([u(e).methods.watched.exists({type:u(t).name,id:u(t).params.id})?"opacity:1":"opacity:0.5"])},"\u{1F441}\uFE0E",4)]),_:1})):l("",!0),u(e).state.credentials.loggedIn?(s(),k(N,{key:3,title:"Pripnutie prehr\xE1va\u010Da",onHandleClick:i[3]||(i[3]=n=>u(e).methods.settings.pinnedPlayerToggle())},{icon:p(()=>[a("span",{style:W([u(e).state.settings.pinnedPlayer?"opacity:1":"opacity:0.6"]),class:"material-symbols-outlined"},"push_pin",4)]),_:1})):l("",!0),u(e).state.credentials.loggedIn?(s(),k(N,{key:4,title:"Pridanie k z\xE1lo\u017Ekam",onHandleClick:i[4]||(i[4]=n=>u(e).methods.favourites.toggle({id:u(t).params.id,img:r.value.poster,type:u(t).name,title:r.value.title}))},{icon:p(()=>[a("span",Qe,_(u(e).methods.favourites.exists({type:u(t).name,id:u(t).params.id})?"bookmark_remove":"bookmark_add"),1)]),_:1})):l("",!0),R(" "+_(w.$refs.subnav.name),1)],64))]),_:1},512)]),title:p(()=>[v.value?l("",!0):(s(),c("span",Xe,_(r.value.title),1))]),subtitle:p(()=>[v.value?l("",!0):(s(),c("div",et,[a("span",tt,_(r.value.rated),1),r.value.year?(s(),c("span",st,_(r.value.year),1)):l("",!0),r.value.title!==r.value.original_title?(s(),c("span",at,_(r.value.original_title),1)):l("",!0)]))]),tagline:p(()=>{var n;return[v.value?l("",!0):(s(),c("span",ot,_((n=r.value)==null?void 0:n.tagline),1))]}),shortOverview:p(()=>{var n;return[v.value?l("",!0):(s(),c("span",nt,"Kr\xE1tky preh\u013Ead")),v.value?l("",!0):(s(),c("span",it,_(((n=r.value)==null?void 0:n.overview)||"\u017Diadny preh\u013Ead"),1))]}),player:p(()=>[v.value?l("",!0):(s(),k(Je,{key:0,isPlayerWorking:I.value,id:o.value.id.toString(),seasons:P.value,title:r.value.title,lastEpisode:o.value.last_episode_to_air,nextEpisode:o.value.next_episode_to_air,hasFirstEpisodeAired:new Date>new Date(o.value.first_air_date)},null,8,["isPlayerWorking","id","seasons","title","lastEpisode","nextEpisode","hasFirstEpisodeAired"]))]),details:p(()=>[v.value?l("",!0):(s(),k(re,{key:0,details:r.value},null,8,["details"]))]),_:1},8,["bg"]),v.value?l("",!0):(s(),c("main",lt,[b.value.length!==0?(s(),k(ne,{key:0},{title:p(()=>[R("Herci")]),card:p(()=>[(s(!0),c(O,null,F(b.value,n=>(s(),k(de,{key:n.id,type:"person",id:n.id},{image:p(()=>[a("img",{src:`https://www.themoviedb.org/t/p/w300_and_h300_face${n.profile_path}`,alt:n.name},null,8,rt)]),name:p(()=>[R(_(n.name),1)]),character:p(()=>[R(_(n.character),1)]),_:2},1032,["id"]))),128))]),_:1})):l("",!0),C.value!==void 0?(s(),k(ie,{key:1,items:C.value,type:"youtubeVideo"},null,8,["items"])):l("",!0),y.value.length!==0?(s(),k(ue,{key:2,type:"tv",hoverEffect:!0,scroll:!0},{title:p(()=>[R("Podobn\xE9")]),card:p(()=>[(s(!0),c(O,null,F(y.value,n=>(s(),k(ce,{key:n.id,item:n},null,8,["item"]))),128))]),_:1})):l("",!0)]))])}}};export{vt as default};
