import{_ as B,r as f,h as M,L as J,k as D,H as A,M as Z,B as q,o as s,c,d as a,t as _,e as r,n as W,m as G,i as K,A as Y,v as Q,N as j,a as z,u as l,q as L,w as p,F as O,g as F,T as H,l as k,b as R,G as X,x as ee,y as te,I as se}from"./index.4890fbba.js";import{P as ae,a as oe,C as ie,M as ne,_ as le,S as N,D as re,b as de}from"./SubNavButton.762228d8.js";import{C as ue,V as ce}from"./VerticalCard.9800acea.js";import"./Title.7024bd11.js";const pe={key:0,class:"episode-info user-select-none"},ve={class:"title-holder"},_e={class:"title"},me={key:0,class:"airdate"},ye={key:0,class:"thumb-overview"},ge={class:"overview"},he={class:"thumbnail"},fe=["src","alt"],be={key:1},ke={__name:"EpisodeInfo",props:{id:String,season:Number,episode:Number},setup(S){const t=S,u=f({}),e=f(!1);M(()=>{o(t.id,t.season,t.episode)}),J(t,v=>{o(v.id,v.season,v.episode)});const o=async(v,b,P)=>{try{const y=await D({endpoint:`/episode-info/${v}/${b}/${P}`}),E=A.getTranslations(y.translations.translations);u.value={seasonNumber:y.season_number,episodeNumber:y.episode_number,name:E.length>0&&E[0].data.name!==""?E[0].data.name:y.name,airDate:y.air_date!==""?new Date(y.air_date).toLocaleDateString("sk-SK",{weekday:"short",year:"2-digit",month:"short",day:"numeric"}):null,overview:E.length>0?E[0].data.overview:y.overview||"Popis nie je dostupn\xFD",thumbnail:y.still_path!==""?y.still_path:null}}catch(y){console.log(y)}};return(v,b)=>{const P=Z("auto-animate");return u.value.name?q((s(),c("section",pe,[a("div",ve,[a("div",_e,[a("b",null,_(`${u.value.seasonNumber}.${u.value.episodeNumber}`),1),a("span",null,_(u.value.name),1)]),u.value.airDate?(s(),c("span",me,_(u.value.airDate),1)):r("",!0)]),e.value?(s(),c("div",ye,[a("div",ge,[a("span",null,_(u.value.overview),1)]),a("div",he,[u.value.thumbnail?(s(),c("img",{key:0,src:`https://www.themoviedb.org/t/p/w454_and_h254_bestv2${u.value.thumbnail}`,alt:u.value.name},null,8,fe)):(s(),c("div",be))])])):r("",!0),a("button",{onClick:b[0]||(b[0]=y=>e.value=!e.value),class:"button-spoiler"},[a("span",null,_(`${e.value?"Skry":"Zobraz"}`)+" spoiler",1),a("span",{class:"material-symbols-outlined",style:W(`transform: rotate(${e.value?"180":"0"}deg)`)},"keyboard_arrow_down",4)])])),[[P]]):r("",!0)}}},$e=B(ke,[["__scopeId","data-v-e3503187"]]);const we={class:"episode-info"},Ee={class:"label"},Se={class:"info"},Pe={style:{display:"flex",gap:"8px","font-size":"0.8rem","align-items":"center"}},xe={style:{color:"var(--theme-color)"}},Ce={style:{color:"var(--secondary-text-color)"}},Ie={__name:"EpisodeCard",props:{playable:Boolean,info:{season:Number,episode:Number,date:String}},emits:["playEpisode"],setup(S,{emit:t}){return(u,e)=>(s(),c("section",{onClick:e[0]||(e[0]=o=>t("playEpisode",{season:S.info.season-1,episode:S.info.episode-1})),class:"episode-card user-select-none",style:W(`cursor:${S.playable===!0?"pointer":"default"}`)},[a("div",we,[a("span",Ee,[G(u.$slots,"label",{},void 0,!0)]),a("div",Se,[a("div",Pe,[a("b",xe,_(`S${S.info.season}.E${S.info.episode}`),1),a("span",Ce,_(new Date(S.info.date).toLocaleDateString("sk-SK",{weekday:"short",year:"2-digit",month:"short",day:"numeric"})),1)])])])],4))}},U=B(Ie,[["__scopeId","data-v-6e95eef8"]]);const Te={class:"outter-holder"},Re={class:"player-holder-wrap"},Ne={key:0,class:"season-episode"},ze=["disabled"],De={class:"season-select-holder user-select-none"},We={class:"poster-holder"},Oe=["src","alt"],Ve=["onClick","data-active"],Fe={class:"poster-holder"},Ae=["src","alt"],Be={class:"content-holder"},Me={class:"episode-count"},je={class:"episode-select-holder user-select-none"},Le=["onClick","data-active"],He=["disabled"],Ue={key:2,class:"episode-card-holder"},Ke={__name:"TVPlayerPanel",props:{id:String,seasons:Object,title:String,nextEpisode:Object,lastEpisode:Object,hasFirstEpisodeAired:Boolean,isPlayerWorking:Boolean},setup(S){const t=S,u=K("store"),e=Y({season:0,episode:0}),o=f(null),v=f(!0),b=f(t.seasons.filter(g=>g.episode_count!==0)),P=f(null),y=f(null),E=f(!1),x=f(!1),d=({season:g,episode:$})=>{e.season=g,e.episode=$,C()},C=()=>{o.value=`https://www.2embed.to/embed/tmdb/tv?id=${t.id}&s=${e.season+1}&e=${e.episode+1}`,u.state.favourites.some(g=>g.id===t.id.toString())&&u.methods.favourites.update(u.state.favourites.findIndex(g=>g.id===t.id.toString()),e.season+1,e.episode+1)},I=g=>{g==="backwards"?e.episode!==0?e.episode--:(e.season--,e.episode=T.value-1):e.episode+1!==T.value?e.episode++:(e.season++,e.episode=0)};M(()=>{b.value.length===0?v.value=!1:u.state.favourites.findIndex(g=>g.id===t.id.toString())!==-1&&(e.season=parseInt(u.state.favourites[u.state.favourites.findIndex(g=>g.id===t.id.toString())].season)-1||0,e.episode=parseInt(u.state.favourites[u.state.favourites.findIndex(g=>g.id===t.id.toString())].episode)-1||0)});const T=Q(()=>e.season!==null?b.value[e.season].episode_count:null);return j(P,()=>E.value=!1),j(y,()=>x.value=!1),(g,$)=>{var V,w;return s(),c("section",Te,[a("section",Re,[z(ae,{isPlayerWorking:t.isPlayerWorking,title:t.title,isReady:{status:v.value&&t.hasFirstEpisodeAired,message:v.value&&t.hasFirstEpisodeAired?null:v.value&&!t.hasFirstEpisodeAired?"Seri\xE1l zatia\u013E nevy\u0161iel":!v.value&&t.hasFirstEpisodeAired?"Seri\xE1l nem\xE1 \u017Eiadne epiz\xF3dy":"Nastala chyba"},source:o.value,type:"tv",onSetPlayer:$[0]||($[0]=n=>C())},null,8,["isPlayerWorking","title","isReady","source"])]),v.value&&(((V=l(u).state.globalSettings)==null?void 0:V.allowWatchWhileUnregistered)||l(u).state.credentials.loggedIn)?(s(),c("div",Ne,[a("button",{class:L([{disabled:e.season===0&&e.episode===0},"next-previous-episode"]),disabled:e.season===0&&e.episode===0,onClick:$[1]||($[1]=n=>I("backwards")),title:"Predch\xE1dzaj\xFAca epiz\xF3da"},"\xAB",10,ze),a("div",De,[a("div",{class:"selected-season",onClick:$[2]||($[2]=n=>E.value=!E.value)},[a("div",We,[b.value[e.season].poster_path?(s(),c("img",{key:0,src:`https://image.tmdb.org/t/p/w45_and_h45_face${b.value[e.season].poster_path}`,alt:`Obr\xE1zok ${b.value[e.season].season_number}. s\xE9rie`},null,8,Oe)):r("",!0)]),a("span",null,"S\xE9ria "+_(b.value[e.season].season_number),1)]),z(H,{name:"fade"},{default:p(()=>[E.value?(s(),c("div",{key:0,class:"options",ref_key:"seasonList",ref:P},[(s(!0),c(O,null,F(b.value,(n,m)=>(s(),c("div",{onClick:i=>{e.season=m,E.value=!1,e.episode=0},key:n.season_number,class:"option","data-active":e.season===m},[a("div",Fe,[n.poster_path?(s(),c("img",{key:0,src:`https://image.tmdb.org/t/p/w45_and_h45_face${n.poster_path}`,alt:`Obr\xE1zok ${n.season_number}. s\xE9rie`},null,8,Ae)):r("",!0)]),a("div",Be,[a("span",null,"S\xE9ria "+_(n.season_number),1),a("span",Me,_(n.episode_count)+" "+_(n.episode_count==1?"epiz\xF3da":n.episode_count>1&&n.episode_count<5?"epiz\xF3dy":"epiz\xF3d"),1)])],8,Ve))),128))],512)):r("",!0)]),_:1})]),a("div",je,[a("div",{class:"selected-episode",onClick:$[3]||($[3]=n=>x.value=!x.value)},[a("span",null,"Epiz\xF3da "+_(e.episode+1),1)]),z(H,{name:"fade"},{default:p(()=>[x.value?(s(),c("div",{key:0,class:"options",ref_key:"episodeList",ref:y},[(s(!0),c(O,null,F(l(T),n=>(s(),c("div",{key:n,onClick:m=>{e.episode=n-1,x.value=!1},class:"option","data-active":e.episode===n-1},[a("span",null,"Epiz\xF3da "+_(n),1)],8,Le))),128))],512)):r("",!0)]),_:1})]),a("button",{onClick:C,class:"play-button",title:"Prehra\u0165"},"\u25BA"),a("button",{class:L([{disabled:e.season+1===b.value.length&&e.episode+1===l(T)},"next-previous-episode"]),disabled:e.season+1===b.value.length&&e.episode+1===l(T),onClick:$[4]||($[4]=n=>I("forwards")),title:"\u010Eal\u0161ia epiz\xF3da"},"\xBB",10,He)])):r("",!0),((w=l(u).state.globalSettings)==null?void 0:w.allowWatchWhileUnregistered)||l(u).state.credentials.loggedIn?(s(),k($e,{key:1,id:t.id,season:e.season+1,episode:e.episode+1},null,8,["id","season","episode"])):r("",!0),(t.lastEpisode!==null||t.nextEpisode!==null)&&(l(u).state.globalSettings.allowWatchWhileUnregistered||l(u).state.credentials.loggedIn)?(s(),c("section",Ue,[t.lastEpisode?(s(),k(U,{key:0,playable:!0,info:{season:t.lastEpisode.season_number,episode:t.lastEpisode.episode_number,date:t.lastEpisode.air_date,poster:t.lastEpisode.still_path},onPlayEpisode:d},{label:p(()=>[R("Posledn\xE1 epiz\xF3da")]),_:1},8,["info"])):r("",!0),t.nextEpisode?(s(),k(U,{key:1,playable:!1,info:{season:t.nextEpisode.season_number,episode:t.nextEpisode.episode_number,date:t.nextEpisode.air_date}},{label:p(()=>[R("Nasleduj\xFAca epiz\xF3da")]),_:1},8,["info"])):r("",!0)])):r("",!0)])}}},Je=B(Ke,[["__scopeId","data-v-091c1821"]]),Ze={class:"flex-column"},qe=["src","alt"],Ge=a("span",{class:"material-symbols-outlined"},"thumb_up",-1),Ye=a("span",{class:"material-symbols-outlined"},"link",-1),Qe={class:"material-symbols-outlined"},Xe={key:0,class:"title"},et={key:0,class:"under-title"},tt={class:"rated"},st={key:0,class:"bullet-after"},at={key:1,class:"bullet-after"},ot={key:0,class:"tagline"},it={key:0,class:"label"},nt={key:1,class:"overview"},lt={key:0,class:"flex-column"},rt=["src","alt"],vt={__name:"TV",setup(S){const t=ee(),u=te(),e=K("store"),o=f({}),v=f(!0),b=f([]),P=f([]),y=f([]),E=f([]),x=f([]),d=f(null),C=f(!1),I=f(!0),T=async w=>{try{o.value=await D({endpoint:`/title/find/tv/${w}`});const n=await D({endpoint:`/video/tv/${w}`}),m=o.value.omdb;b.value=o.value.credits.cast.filter(h=>h.profile_path!==null).splice(0,16),y.value=o.value.recommendations.results.filter(h=>h.poster_path!==null).splice(0,16),P.value=o.value.seasons.filter(h=>h.season_number!==0),E.value=o.value.networks.filter(h=>h.logo_path!==""),x.value=n.results.filter(h=>h.type==="Trailer");const i=A.getTranslations(o.value.translations.translations);d.value={title:i.length>0&&i[0].data.title!==""&&i[0].data.name!==""?i[0].data.title||i[0].data.name:o.value.name,original_title:o.value.original_name,poster:o.value.poster_path,genres:o.value.genres||[],runtime:o.value.episode_run_time[0]?Math.floor(o.value.episode_run_time[0]/60)+"h "+o.value.episode_run_time[0]%60+"m":null,overview:i.length>0?i[0].data.overview:o.value.overview,countries:o.value.origin_country,tagline:i.length>0?i[0].data.tagline:o.value.tagline,imdb:o.value.external_ids.imdb_id,networks:o.value.networks.filter(h=>h.logo_path!==""),creators:A.sortCreators(o.value.created_by.slice(0,5)),ratings:[{name:"TMDB",rating:(Math.floor(parseFloat(o.value.vote_average)*10)/10).toString(),url:`https://www.themoviedb.org/tv/${t.params.id}`},{name:"IMDB",rating:m.imdbRating,url:`https://www.imdb.com/title/${o.value.external_ids.imdb_id}`},{name:"Rotten Tomatoes",rating:m.Ratings!==void 0&&m.Ratings.find(h=>h.Source==="Rotten Tomatoes")!==void 0?m.Ratings.find(h=>h.Source==="Rotten Tomatoes").Value:null,url:null},{name:"Metascore",rating:m.Ratings!==void 0&&m.Ratings.find(h=>h.Source==="Metacritic")!==void 0?parseInt(m.Ratings.find(h=>h.Source==="Metacritic").Value):null,url:null}],year:m.Year,rated:!m.Rated||m.Rated==="N/A"?"Not Rated":m.Rated,number_of_episodes:o.value.number_of_episodes,status:g.get(o.value.status),languages:o.value.spoken_languages},v.value=!1,I.value=o.value.isPlayerWorking,C.value=o.value.isRecommended,document.title=`${d.value.title}${d.value.year?" ("+d.value.year+")":""} / Filmot\xE9ka`}catch{u.push({name:"NotFound"})}},g=new Map;g.set("Returning Series","Pokra\u010Duje").set("Planned","Napl\xE1novany").set("In Production","V produkci\xED").set("Ended","Skon\u010Dil").set("Canceled","Zru\u0161en\xFD").set("Pilot","Pilot");const $=async()=>{try{const w=await D({endpoint:"/title/non-working/",options:{method:"POST",headers:{"Content-Type":"application/json","access-token":e.state.credentials.accessToken},body:JSON.stringify({type:t.name,id:t.params.id,img:d.value.poster,savedTitle:d.value.title})}});I.value=w.isPlayerWorking}catch(w){console.log(w)}},V=async w=>{const{title:n,...m}=w;try{(await D({endpoint:"/title/recommend",options:{method:"POST",headers:{"Content-Type":"application/json","access-token":e.state.credentials.accessToken},body:JSON.stringify({savedTitle:n,...m})}})).success&&(C.value=!0,se({type:"success",text:"\xDAspe\u0161ne pridan\xE9 do odpor\xFA\u010Dan\xFDch"}))}catch(i){console.log(i)}};return M(()=>{T(t.params.id)}),X(()=>{d.value!==null&&(document.title=`${d.value.title}${d.value.year?" ("+d.value.year+")":""} / Filmot\xE9ka`)}),(w,n)=>{var m;return s(),c("main",Ze,[z(oe,{type:"tv",bg:(m=o.value)==null?void 0:m.backdrop_path},{poster:p(()=>{var i;return[(i=d.value)!=null&&i.poster?(s(),c("img",{key:0,class:"poster",src:`https://www.themoviedb.org/t/p/w300${d.value.poster}`,alt:d.value.title},null,8,qe)):r("",!0)]}),subnav:p(()=>[z(le,{ref:"subnav"},{default:p(()=>[v.value?r("",!0):(s(),c(O,{key:0},[l(e).state.credentials.loggedIn?(s(),k(N,{key:0,title:"Funguj\xFAci prehr\xE1va\u010D",onHandleClick:$},{icon:p(()=>[a("span",{style:W([I.value===!1?"opacity:1":"opacity:0.6"]),class:"material-symbols-outlined"},"error",4)]),_:1})):r("",!0),l(e).state.credentials.loggedIn?(s(),k(N,{key:1,title:"Odpor\xFA\u010Di\u0165",disabled:C.value,onHandleClick:n[0]||(n[0]=i=>V({id:l(t).params.id,img:d.value.poster,type:l(t).name,title:d.value.title}))},{icon:p(()=>[Ge]),_:1},8,["disabled"])):r("",!0),z(N,{title:"Skop\xEDrova\u0165 URL adresu",onHandleClick:n[1]||(n[1]=i=>w.$refs.subnav.copyUrl())},{icon:p(()=>[Ye]),_:1}),l(e).state.credentials.loggedIn?(s(),k(N,{key:2,title:"Prezren\xE9",onHandleClick:n[2]||(n[2]=i=>l(e).methods.watched.toggle({id:l(t).params.id,type:l(t).name,title:d.value.title}))},{icon:p(()=>[a("span",{class:"material-symbols-outlined",style:W([l(e).methods.watched.exists({type:l(t).name,id:l(t).params.id})?"opacity:1;":"opacity:0.5"])},_(l(e).methods.watched.exists({type:l(t).name,id:l(t).params.id})?"visibility":"visibility_off"),5)]),_:1})):r("",!0),l(e).state.credentials.loggedIn?(s(),k(N,{key:3,title:"Pripnutie prehr\xE1va\u010Da",onHandleClick:n[3]||(n[3]=i=>l(e).methods.settings.pinnedPlayerToggle())},{icon:p(()=>[a("span",{style:W([l(e).state.settings.pinnedPlayer?"opacity:1":"opacity:0.6"]),class:"material-symbols-outlined"},"push_pin",4)]),_:1})):r("",!0),l(e).state.credentials.loggedIn?(s(),k(N,{key:4,title:"Pridanie k z\xE1lo\u017Ekam",onHandleClick:n[4]||(n[4]=i=>l(e).methods.favourites.toggle({id:l(t).params.id,img:d.value.poster,type:l(t).name,title:d.value.title}))},{icon:p(()=>[a("span",Qe,_(l(e).methods.favourites.exists({type:l(t).name,id:l(t).params.id})?"bookmark_remove":"bookmark_add"),1)]),_:1})):r("",!0),R(" "+_(w.$refs.subnav.name),1)],64))]),_:1},512)]),title:p(()=>[v.value?r("",!0):(s(),c("span",Xe,_(d.value.title),1))]),subtitle:p(()=>[v.value?r("",!0):(s(),c("div",et,[a("span",tt,_(d.value.rated),1),d.value.year?(s(),c("span",st,_(d.value.year),1)):r("",!0),d.value.title!==d.value.original_title?(s(),c("span",at,_(d.value.original_title),1)):r("",!0)]))]),tagline:p(()=>{var i;return[v.value?r("",!0):(s(),c("span",ot,_((i=d.value)==null?void 0:i.tagline),1))]}),shortOverview:p(()=>{var i;return[v.value?r("",!0):(s(),c("span",it,"Kr\xE1tky preh\u013Ead")),v.value?r("",!0):(s(),c("span",nt,_(((i=d.value)==null?void 0:i.overview)||"\u017Diadny preh\u013Ead"),1))]}),player:p(()=>[v.value?r("",!0):(s(),k(Je,{key:0,isPlayerWorking:I.value,id:o.value.id.toString(),seasons:P.value,title:d.value.title,lastEpisode:o.value.last_episode_to_air,nextEpisode:o.value.next_episode_to_air,hasFirstEpisodeAired:new Date>new Date(o.value.first_air_date)},null,8,["isPlayerWorking","id","seasons","title","lastEpisode","nextEpisode","hasFirstEpisodeAired"]))]),details:p(()=>[v.value?r("",!0):(s(),k(re,{key:0,details:d.value},null,8,["details"]))]),_:1},8,["bg"]),v.value?r("",!0):(s(),c("main",lt,[b.value.length!==0?(s(),k(ie,{key:0},{title:p(()=>[R("Herci")]),card:p(()=>[(s(!0),c(O,null,F(b.value,i=>(s(),k(de,{key:i.id,type:"person",id:i.id},{image:p(()=>[a("img",{src:`https://www.themoviedb.org/t/p/w300_and_h300_face${i.profile_path}`,alt:i.name},null,8,rt)]),name:p(()=>[R(_(i.name),1)]),character:p(()=>[R(_(i.character),1)]),_:2},1032,["id"]))),128))]),_:1})):r("",!0),x.value!==void 0?(s(),k(ne,{key:1,items:x.value,type:"youtubeVideo"},null,8,["items"])):r("",!0),y.value.length!==0?(s(),k(ue,{key:2,type:"tv",hoverEffect:!0,scroll:!0},{title:p(()=>[R("Podobn\xE9")]),card:p(()=>[(s(!0),c(O,null,F(y.value,i=>(s(),k(ce,{key:i.id,item:i},null,8,["item"]))),128))]),_:1})):r("",!0)]))])}}};export{vt as default};
