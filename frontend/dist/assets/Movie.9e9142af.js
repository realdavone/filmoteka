import{_ as B,r as h,o as l,c as d,d as b,q as O,a as y,b as i,w as s,e as P,p as z,f as A,h as E,E as K,l as m,v as L,x as U,j as J,k as S,G as N,F as x,u as n,H as D,t as k,g as W,I as M}from"./index.88e82aa5.js";import{P as q,a as G,C as Y,M as Q,_ as X,S as f,D as Z,b as ee}from"./SubNavButton.32960114.js";import{C as te,V as ae}from"./VerticalCard.6787f0d7.js";import"./Title.e6b178dd.js";const le={class:"outter-holder"},se={__name:"MoviePlayerPanel",props:{id:String,isReleased:Boolean,title:String,isPlayerWorking:Boolean},setup(g){const o=g,w=h(null),r=()=>{w.value=`https://www.2embed.to/embed/imdb/movie?id=${o.id}`};return(t,p)=>(l(),d("section",le,[b(q,{isPlayerWorking:o.isPlayerWorking,title:o.title,isReady:{status:o.isReleased,message:o.isReleased?null:"Film e\u0161te nevy\u0161iel"},source:w.value,type:"movie",onSetPlayer:p[0]||(p[0]=$=>r())},null,8,["isPlayerWorking","title","isReady","source"])]))}},oe=B(se,[["__scopeId","data-v-52b37005"]]);const ne=g=>(z("data-v-ae057a14"),g=g(),A(),g),ie={class:"outter container user-select-none"},re={class:"inner"},ue={key:0,class:"background-image"},ce=["src"],de=ne(()=>y("span",{class:"heading"},"Tento film je s\xFA\u010Das\u0165ou kolekcie",-1)),ve={__name:"Collection",props:{collection:Object},setup(g){return(o,w)=>{const r=O("router-link");return l(),d("section",ie,[y("section",re,[g.collection.backdrop_path?(l(),d("div",ue,[y("img",{src:`https://www.themoviedb.org/t/p/w1440_and_h320_multi_faces${g.collection.backdrop_path}`,alt:""},null,8,ce)])):i("",!0),de,b(r,{class:"cta",to:{name:"Collection",params:{id:g.collection.id}}},{default:s(()=>[P("Prejs\u0165 na kolekciu")]),_:1},8,["to"])])])}}},pe=B(ve,[["__scopeId","data-v-ae057a14"]]),me={class:"flex-column"},_e=["src","alt"],ye=y("span",{class:"material-symbols-outlined"},"thumb_up",-1),ge=y("span",{class:"material-symbols-outlined"},"link",-1),ke={class:"material-symbols-outlined"},he={key:0,class:"title"},fe={key:0,class:"under-title"},be={class:"rated"},we={key:0,class:"bullet-after"},Pe={key:1,class:"bullet-after"},$e={key:0,class:"tagline"},Re={key:0,class:"label"},Se={key:1,class:"overview"},Ce={key:0,class:"flex-column"},Te=["src","alt"],Ne={__name:"Movie",setup(g){const o=L(),w=U(),r=J("store"),t=h({}),p=h(!0),$=h([]),C=h([]),I=h([]),a=h(null),T=h(!1),R=h(!0),F=async _=>{try{t.value=await S({endpoint:`/title/find/movie/${_}`});const v=await S({endpoint:`/video/movie/${_}`}),c=t.value.omdb;I.value=v.results.filter(u=>u.type==="Trailer"),$.value=t.value.credits.cast.filter(u=>u.profile_path!==null).splice(0,16),C.value=t.value.recommendations.results.filter(u=>u.poster_path!==null).splice(0,16);const e=N.getTranslations(t.value.translations.translations);a.value={title:e.length>0&&e[0].data.title!==""&&e[0].data.name!==""?e[0].data.title||e[0].data.name:t.value.title,original_title:t.value.original_title,poster:t.value.poster_path,genres:t.value.genres||[],runtime:t.value.runtime?Math.floor(t.value.runtime/60)+"h "+t.value.runtime%60+"m":null,overview:e.length>0?e[0].data.overview:t.value.overview,countries:t.value.production_countries,tagline:e.length>0?e[0].data.tagline:t.value.tagline,imdb:t.value.imdb_id,networks:t.value.production_companies.filter(u=>u.logo_path!==null),creators:N.sortCreators(t.value.credits.crew.sort((u,H)=>H.popularity-u.popularity).slice(0,5)),ratings:[{name:"TMDB",rating:(Math.floor(parseFloat(t.value.vote_average)*10)/10).toString(),url:`https://www.themoviedb.org/movie/${o.params.id}`},{name:"IMDB",rating:c.imdbRating,url:`https://www.imdb.com/title/${t.value.imdb_id}`},{name:"Rotten Tomatoes",rating:c.Ratings!==void 0&&c.Ratings.find(u=>u.Source==="Rotten Tomatoes")!==void 0?c.Ratings.find(u=>u.Source==="Rotten Tomatoes").Value:null,url:null},{name:"Metascore",rating:c.Ratings!==void 0&&c.Ratings.find(u=>u.Source==="Metacritic")!==void 0?parseInt(c.Ratings.find(u=>u.Source==="Metacritic").Value):null,url:null}],year:c.Year,rated:!c.Rated||c.Rated==="N/A"?"Not Rated":c.Rated,number_of_episodes:null,status:null,release_date:t.value.release_date!==""?new Date(t.value.release_date).toLocaleDateString("sk-SK"):null,languages:t.value.spoken_languages,revenue:new Intl.NumberFormat("sk-SK",{notation:"compact",compactDisplay:"short",style:"currency",currency:"USD"}).format(t.value.revenue)},p.value=!1,R.value=t.value.isPlayerWorking,T.value=t.value.isRecommended,document.title=`${a.value.title}${a.value.year?" ("+a.value.year+")":""} / Filmot\xE9ka`}catch{w.push({name:"NotFound"})}},V=async()=>{try{const _=await S({endpoint:"/title/non-working/",options:{method:"POST",headers:{"Content-Type":"application/json","access-token":r.state.credentials.accessToken},body:JSON.stringify({type:o.name,id:o.params.id,img:a.value.poster,savedTitle:a.value.title})}});R.value=_.isPlayerWorking,_.isPlayerWorking===!1?M({type:"error",text:"Prehr\xE1va\u010D ozna\u010Den\xFD ako nefunk\u010Dn\xFD"}):M({type:"success",text:"Prehr\xE1va\u010D ozna\u010Den\xFD ako funk\u010Dn\xFD"})}catch(_){console.log(_)}},j=async _=>{const{title:v,...c}=_;try{(await S({endpoint:"/title/recommend",options:{method:"POST",headers:{"Content-Type":"application/json","access-token":r.state.credentials.accessToken},body:JSON.stringify({savedTitle:v,...c})}})).success&&(T.value=!0,M({type:"success",text:"\xDAspe\u0161ne pridan\xE9 do odpor\xFA\u010Dan\xFDch"}))}catch(e){console.log(e)}};return E(()=>{F(o.params.id)}),K(()=>{a.value!==null&&(document.title=`${a.value.title}${a.value.year?" ("+a.value.year+")":""} / Filmot\xE9ka`)}),(_,v)=>{var c;return l(),d("main",me,[b(G,{type:"movie",bg:(c=t.value)==null?void 0:c.backdrop_path},{poster:s(()=>{var e;return[(e=a.value)!=null&&e.poster?(l(),d("img",{key:0,class:"poster",src:`https://www.themoviedb.org/t/p/w300${a.value.poster}`,alt:a.value.title},null,8,_e)):i("",!0)]}),subnav:s(()=>[b(X,{ref:"subnav"},{default:s(()=>[p.value?i("",!0):(l(),d(x,{key:0},[n(r).state.credentials.loggedIn?(l(),m(f,{key:0,title:"Funguj\xFAci prehr\xE1va\u010D",onHandleClick:V},{icon:s(()=>[y("span",{style:D([R.value===!1?"opacity:1":"opacity:0.6"])},"\u26A0",4)]),_:1})):i("",!0),n(r).state.credentials.loggedIn?(l(),m(f,{key:1,title:"Odpor\xFA\u010Di\u0165",disabled:T.value,onHandleClick:v[0]||(v[0]=e=>j({id:n(o).params.id,img:a.value.poster,type:n(o).name,title:a.value.title}))},{icon:s(()=>[ye]),_:1},8,["disabled"])):i("",!0),b(f,{title:"Skop\xEDrova\u0165 URL adresu",onHandleClick:v[1]||(v[1]=e=>_.$refs.subnav.copyUrl())},{icon:s(()=>[ge]),_:1}),n(r).state.credentials.loggedIn?(l(),m(f,{key:2,title:"Prezren\xE9",onHandleClick:v[2]||(v[2]=e=>n(r).methods.watched.toggle({id:n(o).params.id,type:n(o).name,title:a.value.title}))},{icon:s(()=>[y("span",{style:D([n(r).methods.watched.exists({type:n(o).name,id:n(o).params.id})?"opacity:1;":"opacity:0.5"])},"\u{1F441}\uFE0E",4)]),_:1})):i("",!0),n(r).state.credentials.loggedIn?(l(),m(f,{key:3,title:"Pripnutie prehr\xE1va\u010Da",onHandleClick:v[3]||(v[3]=e=>n(r).methods.settings.pinnedPlayerToggle())},{icon:s(()=>[y("span",{style:D([n(r).state.settings.pinnedPlayer?"opacity:1":"opacity:0.5"]),class:"material-symbols-outlined"},"push_pin",4)]),_:1})):i("",!0),n(r).state.credentials.loggedIn?(l(),m(f,{key:4,title:"Pridanie k z\xE1lo\u017Ekam",onHandleClick:v[4]||(v[4]=e=>n(r).methods.favourites.toggle({id:n(o).params.id,img:a.value.poster,type:n(o).name,title:a.value.title}))},{icon:s(()=>[y("span",ke,k(n(r).methods.favourites.exists({type:n(o).name,id:n(o).params.id})?"bookmark_remove":"bookmark_add"),1)]),_:1})):i("",!0)],64))]),_:1},512)]),title:s(()=>[p.value?i("",!0):(l(),d("span",he,k(a.value.title),1))]),subtitle:s(()=>[p.value?i("",!0):(l(),d("div",fe,[y("span",be,k(a.value.rated),1),a.value.year?(l(),d("span",we,k(a.value.year),1)):i("",!0),a.value.title!==a.value.original_title?(l(),d("span",Pe,k(a.value.original_title),1)):i("",!0)]))]),tagline:s(()=>{var e;return[p.value?i("",!0):(l(),d("span",$e,k((e=a.value)==null?void 0:e.tagline),1))]}),shortOverview:s(()=>{var e;return[p.value?i("",!0):(l(),d("span",Re,"Kr\xE1tky preh\u013Ead")),p.value?i("",!0):(l(),d("span",Se,k(((e=a.value)==null?void 0:e.overview)||"\u017Diadny preh\u013Ead"),1))]}),player:s(()=>[p.value?i("",!0):(l(),m(oe,{key:0,isPlayerWorking:R.value,id:t.value.imdb_id,isReleased:new Date>new Date(t.value.release_date),title:a.value.title},null,8,["isPlayerWorking","id","isReleased","title"]))]),details:s(()=>[p.value?i("",!0):(l(),m(Z,{key:0,details:a.value},null,8,["details"]))]),_:1},8,["bg"]),p.value?i("",!0):(l(),d("main",Ce,[$.value.length!==0?(l(),m(Y,{key:0},{title:s(()=>[P("Herci")]),card:s(()=>[(l(!0),d(x,null,W($.value,e=>(l(),m(ee,{key:e.id,type:"person",id:e.id},{image:s(()=>[y("img",{src:`https://www.themoviedb.org/t/p/w300_and_h300_face${e.profile_path}`,alt:e.name},null,8,Te)]),name:s(()=>[P(k(e.name),1)]),character:s(()=>[P(k(e.character),1)]),_:2},1032,["id"]))),128))]),_:1})):i("",!0),t.value.belongs_to_collection?(l(),m(pe,{key:1,collection:t.value.belongs_to_collection},null,8,["collection"])):i("",!0),b(Q,{items:I.value,type:"youtubeVideo"},null,8,["items"]),C.value.length!==0?(l(),m(te,{key:2,hoverEffect:!0,scroll:!0},{title:s(()=>[P("Podobn\xE9")]),card:s(()=>[(l(!0),d(x,null,W(C.value,e=>(l(),m(ae,{key:e.id,item:e},null,8,["item"]))),128))]),_:1})):i("",!0)]))])}}};export{Ne as default};
