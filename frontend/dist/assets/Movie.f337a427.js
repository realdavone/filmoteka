import{_ as F,r as h,o as l,c as p,a as b,s as z,d as _,w as n,n as C,p as A,f as K,h as L,G as U,l as m,e as i,x as E,y as J,i as G,k as $,H as W,F as D,u as o,t as g,b as S,g as B,I as M}from"./index.3085cc2c.js";import{P as Y,a as q,C as Q,M as X,_ as Z,S as f,D as ee,b as te}from"./SubNavButton.d0e2e827.js";import{C as ae,V as le}from"./VerticalCard.1b6af472.js";import"./Title.f1bda164.js";const se={class:"outter-holder"},oe={__name:"MoviePlayerPanel",props:{id:String,isReleased:Boolean,title:String,isPlayerWorking:Boolean},setup(k){const s=k,w=h(null),r=()=>{w.value=`https://www.2embed.to/embed/imdb/movie?id=${s.id}`};return(t,v)=>(l(),p("section",se,[b(Y,{isPlayerWorking:s.isPlayerWorking,title:s.title,isReady:{status:s.isReleased,message:s.isReleased?null:"Film e\u0161te nevy\u0161iel"},source:w.value,type:"movie",onSetPlayer:v[0]||(v[0]=P=>r())},null,8,["isPlayerWorking","title","isReady","source"])]))}},ne=F(oe,[["__scopeId","data-v-e9114070"]]);const I=k=>(A("data-v-06a4d2e2"),k=k(),K(),k),ie={class:"outter container user-select-none"},re=I(()=>_("span",{class:"heading"},"Tento film je s\xFA\u010Das\u0165ou kolekcie",-1)),ue=I(()=>_("b",null,"Prejs\u0165 na kolekciu",-1)),ce=I(()=>_("span",{class:"material-symbols-outlined"},"chevron_right",-1)),de={__name:"Collection",props:{collection:Object},setup(k){const s=k;return(w,r)=>{const t=z("router-link");return l(),p("section",ie,[_("section",{class:"inner",style:C(s.collection.backdrop_path!==null?`background:linear-gradient(90deg, var(--background-color-alpha) 20%, #ffffff00 100%), url(https://www.themoviedb.org/t/p/w1440_and_h320_multi_faces${s.collection.backdrop_path})`:"background:black;")},[re,b(t,{class:"cta",to:{name:"Collection",params:{id:s.collection.id}}},{default:n(()=>[ue,ce]),_:1},8,["to"])],4)])}}},pe=F(de,[["__scopeId","data-v-06a4d2e2"]]),ve={class:"flex-column"},me=["src","alt"],_e=_("span",{class:"material-symbols-outlined"},"thumb_up",-1),ye=_("span",{class:"material-symbols-outlined"},"link",-1),ge={class:"material-symbols-outlined"},he={key:0,class:"title"},ke={key:0,class:"under-title"},fe={class:"rated"},be={key:0,class:"bullet-after"},we={key:1,class:"bullet-after"},Pe={key:0,class:"tagline"},Re={key:0,class:"label"},$e={key:1,class:"overview"},Se={key:0,class:"flex-column"},Ce=["src","alt"],Ie={__name:"Movie",setup(k){const s=E(),w=J(),r=G("store"),t=h({}),v=h(!0),P=h([]),x=h([]),N=h([]),a=h(null),T=h(!1),R=h(!0),V=async y=>{try{t.value=await $({endpoint:`/title/find/movie/${y}`});const d=await $({endpoint:`/video/movie/${y}`}),c=t.value.omdb;N.value=d.results.filter(u=>u.type==="Trailer"),P.value=t.value.credits.cast.filter(u=>u.profile_path!==null).splice(0,16),x.value=t.value.recommendations.results.filter(u=>u.poster_path!==null).splice(0,16);const e=W.getTranslations(t.value.translations.translations);a.value={title:e.length>0&&e[0].data.title!==""&&e[0].data.name!==""?e[0].data.title||e[0].data.name:t.value.title,original_title:t.value.original_title,poster:t.value.poster_path,genres:t.value.genres||[],runtime:t.value.runtime?Math.floor(t.value.runtime/60)+"h "+t.value.runtime%60+"m":null,overview:e.length>0?e[0].data.overview:t.value.overview,countries:t.value.production_countries,tagline:e.length>0?e[0].data.tagline:t.value.tagline,imdb:t.value.imdb_id,networks:t.value.production_companies.filter(u=>u.logo_path!==null),creators:W.sortCreators(t.value.credits.crew.sort((u,O)=>O.popularity-u.popularity).slice(0,5)),ratings:[{name:"TMDB",rating:(Math.floor(parseFloat(t.value.vote_average)*10)/10).toString(),url:`https://www.themoviedb.org/movie/${s.params.id}`},{name:"IMDB",rating:c.imdbRating,url:`https://www.imdb.com/title/${t.value.imdb_id}`},{name:"Rotten Tomatoes",rating:c.Ratings!==void 0&&c.Ratings.find(u=>u.Source==="Rotten Tomatoes")!==void 0?c.Ratings.find(u=>u.Source==="Rotten Tomatoes").Value:null,url:null},{name:"Metascore",rating:c.Ratings!==void 0&&c.Ratings.find(u=>u.Source==="Metacritic")!==void 0?parseInt(c.Ratings.find(u=>u.Source==="Metacritic").Value):null,url:null}],year:c.Year,rated:!c.Rated||c.Rated==="N/A"?"Not Rated":c.Rated,number_of_episodes:null,status:null,release_date:t.value.release_date!==""?new Date(t.value.release_date).toLocaleDateString("sk-SK"):null,languages:t.value.spoken_languages,revenue:new Intl.NumberFormat("sk-SK",{notation:"compact",compactDisplay:"short",style:"currency",currency:"USD"}).format(t.value.revenue)},v.value=!1,R.value=t.value.isPlayerWorking,T.value=t.value.isRecommended,document.title=`${a.value.title}${a.value.year?" ("+a.value.year+")":""} / Filmot\xE9ka`}catch{w.push({name:"NotFound"})}},H=async()=>{try{const y=await $({endpoint:"/title/non-working/",options:{method:"POST",headers:{"Content-Type":"application/json","access-token":r.state.credentials.accessToken},body:JSON.stringify({type:s.name,id:s.params.id,img:a.value.poster,savedTitle:a.value.title})}});R.value=y.isPlayerWorking,y.isPlayerWorking===!1?M({type:"error",text:"Prehr\xE1va\u010D ozna\u010Den\xFD ako nefunk\u010Dn\xFD"}):M({type:"success",text:"Prehr\xE1va\u010D ozna\u010Den\xFD ako funk\u010Dn\xFD"})}catch(y){console.log(y)}},j=async y=>{const{title:d,...c}=y;try{(await $({endpoint:"/title/recommend",options:{method:"POST",headers:{"Content-Type":"application/json","access-token":r.state.credentials.accessToken},body:JSON.stringify({savedTitle:d,...c})}})).success&&(T.value=!0,M({type:"success",text:"\xDAspe\u0161ne pridan\xE9 do odpor\xFA\u010Dan\xFDch"}))}catch(e){console.log(e)}};return L(()=>{V(s.params.id)}),U(()=>{a.value!==null&&(document.title=`${a.value.title}${a.value.year?" ("+a.value.year+")":""} / Filmot\xE9ka`)}),(y,d)=>{var c;return l(),p("main",ve,[b(q,{type:"movie",bg:(c=t.value)==null?void 0:c.backdrop_path},{poster:n(()=>{var e;return[(e=a.value)!=null&&e.poster?(l(),p("img",{key:0,class:"poster",src:`https://www.themoviedb.org/t/p/w300${a.value.poster}`,alt:a.value.title},null,8,me)):i("",!0)]}),subnav:n(()=>[b(Z,{ref:"subnav"},{default:n(()=>[v.value?i("",!0):(l(),p(D,{key:0},[o(r).state.credentials.loggedIn?(l(),m(f,{key:0,title:"Funguj\xFAci prehr\xE1va\u010D",onHandleClick:H},{icon:n(()=>[_("span",{style:C([R.value===!1?"opacity:1":"opacity:0.6"]),class:"material-symbols-outlined"},"error",4)]),_:1})):i("",!0),o(r).state.credentials.loggedIn?(l(),m(f,{key:1,title:"Odpor\xFA\u010Di\u0165",disabled:T.value,onHandleClick:d[0]||(d[0]=e=>j({id:o(s).params.id,img:a.value.poster,type:o(s).name,title:a.value.title}))},{icon:n(()=>[_e]),_:1},8,["disabled"])):i("",!0),b(f,{title:"Skop\xEDrova\u0165 URL adresu",onHandleClick:d[1]||(d[1]=e=>y.$refs.subnav.copyUrl())},{icon:n(()=>[ye]),_:1}),o(r).state.credentials.loggedIn?(l(),m(f,{key:2,title:"Prezren\xE9",onHandleClick:d[2]||(d[2]=e=>o(r).methods.watched.toggle({id:o(s).params.id,type:o(s).name,title:a.value.title}))},{icon:n(()=>[_("span",{class:"material-symbols-outlined",style:C([o(r).methods.watched.exists({type:o(s).name,id:o(s).params.id})?"opacity:1;":"opacity:0.5"])},g(o(r).methods.watched.exists({type:o(s).name,id:o(s).params.id})?"visibility":"visibility_off"),5)]),_:1})):i("",!0),o(r).state.credentials.loggedIn?(l(),m(f,{key:3,title:"Pripnutie prehr\xE1va\u010Da",onHandleClick:d[3]||(d[3]=e=>o(r).methods.settings.pinnedPlayerToggle())},{icon:n(()=>[_("span",{style:C([o(r).state.settings.pinnedPlayer?"opacity:1":"opacity:0.6"]),class:"material-symbols-outlined"},"push_pin",4)]),_:1})):i("",!0),o(r).state.credentials.loggedIn?(l(),m(f,{key:4,title:"Pridanie k z\xE1lo\u017Ekam",onHandleClick:d[4]||(d[4]=e=>o(r).methods.favourites.toggle({id:o(s).params.id,img:a.value.poster,type:o(s).name,title:a.value.title}))},{icon:n(()=>[_("span",ge,g(o(r).methods.favourites.exists({type:o(s).name,id:o(s).params.id})?"bookmark_remove":"bookmark_add"),1)]),_:1})):i("",!0)],64))]),_:1},512)]),title:n(()=>[v.value?i("",!0):(l(),p("span",he,g(a.value.title),1))]),subtitle:n(()=>[v.value?i("",!0):(l(),p("div",ke,[_("span",fe,g(a.value.rated),1),a.value.year?(l(),p("span",be,g(a.value.year),1)):i("",!0),a.value.title!==a.value.original_title?(l(),p("span",we,g(a.value.original_title),1)):i("",!0)]))]),tagline:n(()=>{var e;return[v.value?i("",!0):(l(),p("span",Pe,g((e=a.value)==null?void 0:e.tagline),1))]}),shortOverview:n(()=>{var e;return[v.value?i("",!0):(l(),p("span",Re,"Kr\xE1tky preh\u013Ead")),v.value?i("",!0):(l(),p("span",$e,g(((e=a.value)==null?void 0:e.overview)||"\u017Diadny preh\u013Ead"),1))]}),player:n(()=>[v.value?i("",!0):(l(),m(ne,{key:0,isPlayerWorking:R.value,id:t.value.imdb_id,isReleased:new Date>new Date(t.value.release_date),title:a.value.title},null,8,["isPlayerWorking","id","isReleased","title"]))]),details:n(()=>[v.value?i("",!0):(l(),m(ee,{key:0,details:a.value},null,8,["details"]))]),_:1},8,["bg"]),v.value?i("",!0):(l(),p("main",Se,[P.value.length!==0?(l(),m(Q,{key:0},{title:n(()=>[S("Herci")]),card:n(()=>[(l(!0),p(D,null,B(P.value,e=>(l(),m(te,{key:e.id,type:"person",id:e.id},{image:n(()=>[_("img",{src:`https://www.themoviedb.org/t/p/w300_and_h300_face${e.profile_path}`,alt:e.name},null,8,Ce)]),name:n(()=>[S(g(e.name),1)]),character:n(()=>[S(g(e.character),1)]),_:2},1032,["id"]))),128))]),_:1})):i("",!0),t.value.belongs_to_collection?(l(),m(pe,{key:1,collection:t.value.belongs_to_collection},null,8,["collection"])):i("",!0),b(X,{items:N.value,type:"youtubeVideo"},null,8,["items"]),x.value.length!==0?(l(),m(ae,{key:2,hoverEffect:!0,scroll:!0},{title:n(()=>[S("Podobn\xE9")]),card:n(()=>[(l(!0),p(D,null,B(x.value,e=>(l(),m(le,{key:e.id,item:e},null,8,["item"]))),128))]),_:1})):i("",!0)]))])}}};export{Ie as default};
